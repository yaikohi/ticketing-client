import{getRequestEvent as S,isServer as h,ssr as C,ssrHydrationKey as O,ssrAttribute as w,escape as g}from"solid-js/web";import{provideRequestEvent as $}from"solid-js/web/storage";import{c as A}from"./middleware.js";import{createContext as v,useContext as P,startTransition as U,getOwner as T,onCleanup as j,createSignal as m}from"solid-js";import"h3";import"unctx";import"node:async_hooks";function M(t,e,n){if(typeof t!="function")throw new Error("Export from a 'use server' module must be a function");const o="";return new Proxy(t,{get(r,s,a){if(s==="url")return`${o}/_server?id=${encodeURIComponent(e)}&name=${encodeURIComponent(n)}`;if(s==="GET")return a},apply(r,s,a){const c=S();if(!c)throw new Error("Cannot call server function outside of a request");const u=A(c);return u.serverOnly=!0,$(u,()=>t.apply(s,a))}})}const _="http://sr",I=new Set([204,301,302,303,307,308]);function K(t,e){if(t==null)throw new Error(e);return t}const k=v();v();const q=()=>K(P(k),"Make sure your app is wrapped in a <Router />"),z=18e4;let f=new Map;h||setInterval(()=>{const t=Date.now();for(let[e,n]of f.entries())!n[3].size&&t-n[0]>z&&f.delete(e)},3e5);function B(t,e=!0){return U(()=>{const n=Date.now();b(t,o=>{e&&(o[0]=0),H(o[3],n)})})}function b(t,e){t&&!Array.isArray(t)&&(t=[t]);for(let n of f.keys())(t===void 0||L(n,t))&&e(f.get(n))}function H(t,e){for(let n of t)n[1](e)}function L(t,e){for(let n of e)if(t.startsWith(n))return!0;return!1}function D(t){return JSON.stringify(t,(e,n)=>F(n)?Object.keys(n).sort().reduce((o,r)=>(o[r]=n[r],o),{}):n)}function F(t){let e;return t!=null&&typeof t=="object"&&(!(e=Object.getPrototypeOf(t))||e===Object.prototype)}const y=new Map;function W(t){const e=q();return(...n)=>t.apply(e,n)}function x(t,e){function n(...r){const s=t(...r),[a,c]=m();let u;const d=this;async function l(p){const i=await G(p,d.navigatorFactory());return i?c({data:i}):u.clear(),i}return d.submissions[1](p=>[...p,u={input:r,url:o,get result(){return a()?.data},get pending(){return!a()},clear(){d.submissions[1](i=>i.filter(R=>R.input!==r))},retry(){c(void 0);const i=t(...r);return i.then(l,l),i}}]),s.then(l,l),s}const o=t.url||e&&`https://action/${e}`||(h?"":`https://action/${X(t.toString())}`);return E(n,o)}function E(t,e){return t.toString=()=>{if(!e)throw new Error("Client Actions need explicit names if server rendered");return e},t.with=function(...n){const o=function(...s){return t.call(this,...n,...s)},r=new URL(e,_);return r.searchParams.set("args",D(n)),E(o,(r.origin==="https://action"?r.origin:"")+r.pathname+r.search)},t.url=e,h||(y.set(e,t),T()&&j(()=>y.delete(e))),t}const X=t=>t.split("").reduce((e,n)=>(e<<5)-e+n.charCodeAt(0)|0,0);async function G(t,e){let n,o;if(t instanceof Response){if(t.headers.has("X-Revalidate")&&(o=t.headers.get("X-Revalidate").split(",")),t.customBody&&(n=await t.customBody()),I.has(t.status)){const r=t.headers.get("Location")||"/";r.startsWith("http")?window.location.href=r:e(r)}}else n=t;return b(o,r=>r[0]=0),await B(o,!1),n}var J=["<main",' class="mx-auto p-4"><div class="flex flex-col"><h1>Sign up</h1><form method="post"><div class="flex flex-col items-start bg-zinc-200 my-2 py-2"><label>Email</label><input class="px-3 py-2 bg-slate-300 rounded-md w-full"',' name="email"></div><div class="flex flex-col items-start bg-zinc-200 my-2 py-2"><label>Password</label><input class="px-3 py-2 bg-slate-300 rounded-md w-full"',' name="password"></div><button aria-label="','">Submit</button></form></div></main>'];const N=x(async t=>{await new Promise((e,n)=>setTimeout(e,1e3)),console.log(t)});x(M(Q,"c_9877","$$function0"));function ot(){const[t,e]=m(""),[n,o]=m("");return W(N)("Hello from solid!"),C(J,O(),w("value",g(n(),!0),!1),w("value",g(t(),!0),!1),"Sign-up for Ticketing.")}async function Q(t){console.log({values:t.values()})}export{Q as $$function0,ot as default};
