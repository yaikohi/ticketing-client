import{ssrElement as x,escape as b,mergeProps as te,ssr as v,isServer as C,getRequestEvent as $,renderToStream as ne,createComponent as d,delegateEvents as re,ssrHydrationKey as S,ssrAttribute as B,useAssets as se,NoHydration as W,HydrationScript as oe,Hydration as ae}from"solid-js/web";import{lazy as ie,createComponent as ce,sharedConfig as F,children as ue,createMemo as q,on as le,createRoot as he,Show as D,createSignal as de,onCleanup as N,Suspense as me,ErrorBoundary as pe}from"solid-js";import{provideRequestEvent as fe}from"solid-js/web/storage";import{H3Event as P,setResponseStatus as ge,getResponseHeader as ye,setResponseHeader as be,appendResponseHeader as ve,sendRedirect as we,getCookie as Re,setCookie as Se,setHeader as $e,removeResponseHeader as Ee,getRequestURL as Ae,getRequestIP as ke,getRequestWebStream as Ce,eventHandler as xe}from"h3";import{getContext as Te}from"unctx";import{AsyncLocalStorage as Le}from"node:async_hooks";import{c as qe,a as Pe,R as He,g as Me,b as Ne,d as Oe,e as K,m as _e,u as Fe}from"./assets/routing-40e70e6b.js";function Ie(e){let t;const n=z(e),r={duplex:"half",method:e.method,headers:e.headers};return e.node.req.body instanceof ArrayBuffer?new Request(n,{...r,body:e.node.req.body}):new Request(n,{...r,get body(){return t||(t=Ge(e),t)}})}function je(e){return e.web??={request:Ie(e),url:z(e)},e.web.request}function Ue(){return Ze()}const J=Symbol("$HTTPEvent");function Be(e){return typeof e=="object"&&(e instanceof P||e?.[J]instanceof P||e?.__is_event__===!0)}function y(e){return function(...t){let n=t[0];if(Be(n))t[0]=n instanceof P||n.__is_event__?n:n[J];else{if(!globalThis.app.config.server.experimental?.asyncContext)throw new Error("AsyncLocalStorage was not enabled. Use the `server.experimental.asyncContext: true` option in your app configuration to enable it. Or, pass the instance of HTTPEvent that you have as the first argument to the function.");if(n=Ue(),!n)throw new Error("No HTTPEvent found in AsyncLocalStorage. Make sure you are using the function within the server runtime.");t.unshift(n)}return e(...t)}}const z=y(Ae),We=y(ke),H=y(ge),De=y(ye),T=y(be),Ke=y(ve),Je=y(we),ze=y(Re),Ve=y(Se),Ye=y($e),Ge=y(Ce),Qe=y(Ee);function Xe(){return Te("nitro-app",{asyncContext:!!globalThis.app.config.server.experimental?.asyncContext,AsyncLocalStorage:Le})}function Ze(){return Xe().use().event}const V=Symbol("h3Event"),k=Symbol("fetchEvent"),et={get(e,t){return t===k?e:e[t]??e[V][t]}};function tt(e){const t=je(e);return new Proxy({request:t,clientAddress:We(e),locals:{},[V]:e},et)}function nt(e){if(!e[k]){const t=tt(e);e[k]=t}return e[k]}function rt(e){e.forEach(t=>{if(!t.attrs.href)return;let n=document.head.querySelector(`link[href="${t.attrs.href}"]`);n||(n=document.createElement("link"),n.setAttribute("rel","preload"),n.setAttribute("as","style"),n.setAttribute("href",t.attrs.href),document.head.appendChild(n))})}var st=" ";const ot={style:e=>x("style",e.attrs,()=>b(e.children),!0),link:e=>x("link",e.attrs,void 0,!0),script:e=>e.attrs.src?x("script",te(()=>e.attrs,{get id(){return e.key}}),()=>v(st),!0):null};function M(e){let{tag:t,attrs:{key:n,...r}={key:void 0},children:s}=e;return ot[t]({attrs:r,key:n,children:s})}function at(e,t,n,r="default"){return ie(async()=>{{const a=(await e.import())[r],i=(await t.inputs?.[e.src].assets()).filter(f=>f.tag==="style"||f.attrs.rel==="stylesheet");return typeof window<"u"&&rt(i),{default:f=>[...i.map(g=>M(g)),ce(a,f)]}}})}const Y=[{type:"page",$component:{src:"src/routes/[...404].tsx?pick=default&pick=$css",build:()=>import("./_...404_.js"),import:()=>import("./_...404_.js")},path:"/*404",filePath:"/home/ykhi/projects/courses/ticketing/client/src/routes/[...404].tsx"},{type:"page",$component:{src:"src/routes/index.tsx?pick=default&pick=$css",build:()=>import("./index.js"),import:()=>import("./index.js")},path:"/",filePath:"/home/ykhi/projects/courses/ticketing/client/src/routes/index.tsx"},{type:"page",$component:{src:"src/routes/auth/sign-in/index.tsx?pick=default&pick=$css",build:()=>import("./index2.js"),import:()=>import("./index2.js")},path:"/auth/sign-in/",filePath:"/home/ykhi/projects/courses/ticketing/client/src/routes/auth/sign-in/index.tsx"},{type:"page",$component:{src:"src/routes/auth/sign-up/index.tsx?pick=default&pick=$css",build:()=>import("./index3.js"),import:()=>import("./index3.js")},path:"/auth/sign-up/",filePath:"/home/ykhi/projects/courses/ticketing/client/src/routes/auth/sign-up/index.tsx"}],it=lt(Y.filter(e=>e.type==="page")),ct=ht(Y.filter(e=>e.type==="api"));function ut(e,t){const n=e.replace("","").split("/").filter(Boolean);e:for(const r of ct){const s=r.matchSegments;if(n.length<s.length||!r.wildcard&&n.length>s.length)continue;for(let i=0;i<s.length;i++){const l=s[i];if(l&&n[i]!==l)continue e}const a=r[`$${t}`];if(a==="skip"||a===void 0)return;const o={};for(const{type:i,name:l,index:f}of r.params)i===":"?o[l]=n[f]:o[l]=n.slice(f).join("/");return{handler:a,params:o}}}function lt(e){function t(n,r,s,a){const o=Object.values(n).find(i=>s.startsWith(i.id+"/"));return o?(t(o.children||(o.children=[]),r,s.slice(o.id.length)),n):(n.push({...r,id:s,path:s.replace(/\/\([^)/]+\)/g,"")}),n)}return e.sort((n,r)=>n.path.length-r.path.length).reduce((n,r)=>t(n,r,r.path,r.path),[])}function ht(e){return e.flatMap(t=>G(t.path).map(r=>({...t,path:r}))).map(dt).sort((t,n)=>n.score-t.score)}function G(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=t[1]),r=r.slice(t[0].length);return G(r).reduce((a,o)=>[...a,...s.map(i=>i+o)],[])}function dt(e){const t=e.path.split("/").filter(Boolean),n=[],r=[];let s=0,a=!1;for(const[o,i]of t.entries())if(i[0]===":"){const l=i.slice(1);s+=3,n.push({type:":",name:l,index:o}),r.push(null)}else i[0]==="*"?(s-=1,n.push({type:"*",name:i.slice(1),index:o}),a=!0):(s+=4,i.match(/^\(.+\)$/)||r.push(i));return{...e,score:s,params:n,matchSegments:r,wildcard:a}}function Q(){function e(n){return{...n,...n.$$route?n.$$route.require().route:void 0,metadata:{...n.$$route?n.$$route.require().route.metadata:{},filesystem:!0},component:at(n.$component,globalThis.MANIFEST.client,globalThis.MANIFEST.ssr),children:n.children?n.children.map(e):void 0}}return it.map(e)}let I;const mt=()=>C?$().routes:I||(I=Q());function pt(e){const t=ze(e,"flash");if(!t)return;let n=JSON.parse(t);if(!n||!n.result)return[];const r=[...n.input.slice(0,-1),new Map(n.input[n.input.length-1])];return Ve(e,"flash","",{maxAge:0}),{url:n.url,result:n.error?new Error(n.result):n.result,input:r}}async function X(e){const t=globalThis.MANIFEST.client;return globalThis.MANIFEST.ssr,T(e,"Content-Type","text/html"),Object.assign(e,{manifest:await t.json(),assets:[...await t.inputs[t.handler].assets()],initialSubmission:pt(e),routes:Q(),components:{status:r=>(H(e,r.code,r.text),()=>!e.handled&&H(e,200)),header:r=>(r.append?Ke(e,r.name,r.value):T(e,r.name,r.value),()=>{if(e.handled)return;let s=De(e,r.name);Array.isArray(s)||(s=[s]);const a=s.indexOf(r.value);a!==-1&&s.splice(a,1),s.length?T(e,r.name,s):Qe(e,r.name)})},$islands:new Set})}function ft(e,t={}){return xe({onRequest:t.onRequest,onBeforeResponse:t.onBeforeResponse,handler:n=>{const r=nt(n);return fe(r,async()=>{const s=ut(new URL(r.request.url).pathname,r.request.method);if(s){const h=(await s.handler.import())[r.request.method];return r.params=s.params,F.context={event:r},await h(r)}const a=await X(r);let o={...t};if(o.onCompleteAll){const g=o.onCompleteAll;o.onCompleteAll=h=>{U(a)(h),g(h)}}else o.onCompleteAll=U(a);if(o.onCompleteShell){const g=o.onCompleteShell;o.onCompleteShell=h=>{j(a,n)(),g(h)}}else o.onCompleteShell=j(a,n);const i=ne(()=>(F.context.event=a,e(a)),o);if(a.response&&a.response.headers.get("Location"))return Je(r,a.response.headers.get("Location"));const{writable:l,readable:f}=new TransformStream;return i.pipeTo(l),f})}})}function j(e,t){return()=>{e.response&&e.response.headers.get("Location")&&(H(t,302),Ye(t,"Location",e.response.headers.get("Location")))}}function U(e){return({write:t})=>{const n=e.response&&e.response.headers.get("Location");n&&t(`<script>window.location="${n}"<\/script>`)}}function gt(e,t={}){return ft(e,{...t,createPageEvent:X})}const Z=e=>t=>{const{base:n}=t,r=ue(()=>t.children),s=q(()=>qe(t.root?{component:t.root,children:r()}:r(),t.base||"")),a=Pe(e,s,{base:n});return e.create&&e.create(a),d(He.Provider,{value:a,get children(){return d(yt,{routerState:a,get branches(){return s()}})}})};function yt(e){const t=q(()=>Me(e.branches,e.routerState.location.pathname));if(C){const o=$();o&&(o.routerMatches||(o.routerMatches=[])).push(t().map(({route:i,path:l,params:f})=>({path:i.originalPath,pattern:i.pattern,match:l,params:f,metadata:i.metadata})))}const n=Ne(()=>{const o=t(),i={};for(let l=0;l<o.length;l++)Object.assign(i,o[l].params);return i}),r=[];let s;const a=q(le(t,(o,i,l)=>{let f=i&&o.length===i.length;const g=[];for(let h=0,E=o.length;h<E;h++){const w=i&&i[h],c=o[h];l&&w&&c.route.key===w.route.key?g[h]=l[h]:(f=!1,r[h]&&r[h](),he(u=>{r[h]=u,g[h]=Oe(e.routerState,g[h-1]||e.routerState.base,bt(()=>a()[h+1]),()=>t()[h],n)}))}return r.splice(o.length).forEach(h=>h()),l&&f?l:(s=g[0],g)}));return d(D,{get when(){return a()&&s},keyed:!0,children:o=>d(K.Provider,{value:o,get children(){return o.outlet()}})})}const bt=e=>()=>d(D,{get when(){return e()},keyed:!0,children:t=>d(K.Provider,{value:t,get children(){return t.outlet()}})});function vt([e,t],n,r){return[n?()=>n(e()):e,r?s=>t(r(s)):t]}function wt(e){if(e==="#")return null;try{return document.querySelector(e)}catch{return null}}function Rt(e){let t=!1;const n=s=>typeof s=="string"?{value:s}:s,r=vt(de(n(e.get()),{equals:(s,a)=>s.value===a.value}),void 0,s=>(!t&&e.set(s),s));return e.init&&N(e.init((s=e.get())=>{t=!0,r[1](n(s)),t=!1})),Z({signal:r,create:e.create,utils:e.utils})}function St(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function $t(e,t){const n=wt(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function Et(e){const t=new URL(e);return t.pathname+t.search}function At(e){let t;const n={value:e.url||(t=$())&&Et(t.request.url)||""};return Z({signal:[()=>n,r=>Object.assign(n,r)]})(e)}const kt=new Map;function Ct(e=!0,t=!1,n="/_server"){return r=>{const s=r.base.path(),a=r.navigatorFactory(r.base);let o={};function i(c){return c.namespaceURI==="http://www.w3.org/2000/svg"}function l(c){if(c.defaultPrevented||c.button!==0||c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)return;const u=c.composedPath().find(_=>_ instanceof Node&&_.nodeName.toUpperCase()==="A");if(!u||t&&!u.hasAttribute("link"))return;const p=i(u),m=p?u.href.baseVal:u.href;if((p?u.target.baseVal:u.target)||!m&&!u.hasAttribute("state"))return;const R=(u.getAttribute("rel")||"").split(/\s+/);if(u.hasAttribute("download")||R&&R.includes("external"))return;const A=p?new URL(m,document.baseURI):new URL(m);if(!(A.origin!==window.location.origin||s&&A.pathname&&!A.pathname.toLowerCase().startsWith(s.toLowerCase())))return[u,A]}function f(c){const u=l(c);if(!u)return;const[p,m]=u,O=r.parsePath(m.pathname+m.search+m.hash),R=p.getAttribute("state");c.preventDefault(),a(O,{resolve:!1,replace:p.hasAttribute("replace"),scroll:!p.hasAttribute("noscroll"),state:R&&JSON.parse(R)})}function g(c){const u=l(c);if(!u)return;const[p,m]=u;o[m.pathname]||r.preloadRoute(m,p.getAttribute("preload")!=="false")}function h(c){const u=l(c);if(!u)return;const[p,m]=u;o[m.pathname]||(o[m.pathname]=setTimeout(()=>{r.preloadRoute(m,p.getAttribute("preload")!=="false"),delete o[m.pathname]},200))}function E(c){const u=l(c);if(!u)return;const[,p]=u;o[p.pathname]&&(clearTimeout(o[p.pathname]),delete o[p.pathname])}function w(c){let u=c.submitter&&c.submitter.hasAttribute("formaction")?c.submitter.getAttribute("formaction"):c.target.getAttribute("action");if(!u)return;if(!u.startsWith("https://action/")){const m=new URL(u,_e);if(u=r.parsePath(m.pathname+m.search),!u.startsWith(n))return}if(c.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const p=kt.get(u);if(p){c.preventDefault();const m=new FormData(c.target);c.submitter&&c.submitter.name&&m.append(c.submitter.name,c.submitter.value),p.call(r,m)}}re(["click","submit"]),document.addEventListener("click",f),e&&(document.addEventListener("mouseover",h),document.addEventListener("mouseout",E),document.addEventListener("focusin",g),document.addEventListener("touchstart",g)),document.addEventListener("submit",w),N(()=>{document.removeEventListener("click",f),e&&(document.removeEventListener("mouseover",h),document.removeEventListener("mouseout",E),document.removeEventListener("focusin",g),document.removeEventListener("touchstart",g)),document.removeEventListener("submit",w)})}}function xt(e){return C?At(e):Rt({get:()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),set({value:t,replace:n,scroll:r,state:s}){n?window.history.replaceState(s,"",t):window.history.pushState(s,"",t),$t(window.location.hash.slice(1),r)},init:t=>St(window,"popstate",()=>t()),create:Ct(e.preload,e.explicitLinks,e.actionBase),utils:{go:t=>window.history.go(t)}})(e)}function Tt(e){if(C){const t=$();t&&N(t.components.status(e))}return null}var Lt=["<nav",' class="bg-violet-800"><ul class="container flex items-center p-3 text-gray-200"><!--$-->',"<!--/--><!--$-->","<!--/--><!--$-->","<!--/--></ul></nav>"],qt=["<li",' class="','"><a',">","</a></li>"];function Pt(){return v(Lt,S(),b(d(L,{text:"Home",path:"/"})),b(d(L,{text:"Sign-up",path:"/auth/sign-up"})),b(d(L,{text:"Sign-in",path:"/auth/sign-in"})))}function L({text:e,path:t}){const n=Fe(),r=s=>s==n.pathname?"border-rose-600":"border-transparent hover:border-rose-600";return v(qt,S(),`border-b-2 ${b(r(t),!0)} mx-1.5 sm:mx-6`,B("href",b(t,!0),!1),b(e))}function Ht(){return d(xt,{root:e=>[d(Pt,{}),d(me,{get children(){return e.children}})],get children(){return d(mt,{})}})}function Mt(e){return d(pe,{get fallback(){return d(Tt,{code:500})},get children(){return e.children}})}var Nt=["<script",">","<\/script>"],Ot=["<script",' type="module" async',"><\/script>"];const _t=v("<!DOCTYPE html>");function ee(e,t,n=[]){for(let r=0;r<t.length;r++){const s=t[r];if(s.path!==e[0].path)continue;let a=[...n,s];if(s.children){const o=e.slice(1);if(o.length===0||(a=ee(o,s.children,a),!a))continue}return a}}function Ft(e){const t=$();let n=[];return Promise.resolve().then(async()=>{if(t.routerMatches&&t.routerMatches[0]){const r=[...t.routerMatches[0]];for(;r.length&&(!r[0].metadata||!r[0].metadata.filesystem);)r.shift();const s=r.length&&ee(r,t.routes);if(s)for(let a=0;a<s.length;a++){const o=s[a],l=await globalThis.MANIFEST.client.inputs[o.$component.src].assets();n.push.apply(n,l)}else console.warn("No route matched for preloading js assets")}n=[...new Map(n.map(r=>[r.attrs.key,r])).values()].filter(r=>r.attrs.rel==="modulepreload"&&!t.assets.find(s=>s.attrs.key===r.attrs.key))}),se(()=>n.length?n.map(r=>M(r)):void 0),d(W,{get children(){return[_t,d(e.document,{get assets(){return[d(oe,{}),t.assets.map(r=>M(r))]},get scripts(){return[v(Nt,S(),`window.manifest = ${JSON.stringify(t.manifest)}`),v(Ot,S(),B("src",b(globalThis.MANIFEST.client.inputs[globalThis.MANIFEST.client.handler].output.path,!0),!1))]},get children(){return d(ae,{get children(){return d(Mt,{get children(){return d(Ht,{})}})}})}})]}})}var It=['<head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><link rel="icon" href="/favicon.ico">',"</head>"],jt=["<html",' lang="en">','<body><div id="app">',"</div><!--$-->","<!--/--></body></html>"];const Vt=gt(()=>d(Ft,{document:({assets:e,children:t,scripts:n})=>v(jt,S(),d(W,{get children(){return v(It,b(e))}}),b(t),b(n))}));export{Vt as default};
